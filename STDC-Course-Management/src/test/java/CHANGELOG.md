<?php
include("header.php");
include("sidebar.php");

$_SESSION[randomno] = rand();

	$sqltransaction = "SELECT * FROM loan_payment where payment_id='$_GET[receiptid]'";
	$qsqltransaction= mysqli_query($con,$sqltransaction);
	$rstransaction = mysqli_fetch_array($qsqltransaction);
	
	$sqlcustac ="SELECT * FROM customer WHERE customer_id='$rstransaction[customer_id]'";
 	$qsqlcustac = mysqli_query($con,$sqlcustac);
	$rscustac = mysqli_fetch_array($qsqlcustac);
	
	 $sqlbranch ="SELECT * FROM branch WHERE ifsc_code='$rscustac[ifsc_code]'";
 	$qsqlbranch = mysqli_query($con,$sqlbranch);
	$rsbranch = mysqli_fetch_array($qsqlbranch);

?>
     <div class="templatemo-content-wrapper">
        <div class="templatemo-content">
<div id="divprint">
         <center><h1>Loan Payment Receipt</h1></center>
          <div class="row">
            <div class="col-md-12">
              <form role="form" id="templatemo-preferences-form" name="frmtransaction" method="post" action="" onsubmit="return javascriptvalidation()">
                 <input  type="hidden" name="randomno" value="<?php echo $_SESSION[randomno]; ?>"  />

                  
<table  id="example1" class="table table-striped table-bordered" cellspacing="0" width="75%">
<thead> 
  <tr>
    <th scope="col">&nbsp;Name</th>
    <th scope="col">&nbsp;<?php echo $rscustac[first_name] . " ". $rscustac[last_name]; ?></th>
  </tr>
  
  <tr>
    <th scope="col">&nbsp;Branch</th>
    <td scope="col">&nbsp;<?php echo $rsbranch[branch_name]; ?></td> 
  </tr>
  
  <tr>
    <th scope="col">&nbsp;IFSC Code</th>
    <td scope="col">&nbsp;<?php echo $rsbranch[ifsc_code]; ?></td> 
  </tr>
      
  <tr>
    <th scope="col">&nbsp;Loan Account Number</th>
    <td scope="col">&nbsp;<?php echo  $rstransaction[loan_acc_no]; ?></td> 
  </tr>
  
  <tr>
    <th scope="col">&nbsp;Transaction date</th>
    <td scope="col">&nbsp;<?php echo  $rstransaction[paid_date]; ?></td> 
  </tr>
  
  
  <tr>
    <th scope="col">&nbsp;Loan amount</th>
    <td scope="col">&nbsp;Rs. <?php echo  $rstransaction[loan_amt]; ?></td> 
  </tr>
  
  
  <tr>
    <th scope="col">&nbsp;Interest</th>
    <td scope="col">&nbsp; <?php echo  $rstransaction[interest]; ?>%</td> 
  </tr>
  
  <tr>
    <th scope="col">&nbsp;Total Amount</th>
    <td scope="col">&nbsp;Rs. <?php echo  $rstransaction[total_amt]; ?></td> 
  </tr>
  
  <tr>
    <th scope="col">&nbsp;Paid amount</th>
    <td scope="col">&nbsp;Rs. <?php echo  $rstransaction[paid]; ?></td> 
  </tr>
  <tr>
    <th scope="col">&nbsp;Payment type</th>
    <td scope="col">&nbsp;<?php echo  $rstransaction[payment_type]; ?></td> 
  </tr>
  
  <tr>
    <th scope="col">&nbsp;Account Balance</th>
    <td scope="col">&nbsp;Rs. <?php echo  $rstransaction[balance]; ?></td> 
  </tr>
 
  </thead>
</table>
</div>

<center><input type="button" name="print" value="Print"  class="btn btn-primary"  onClick="PrintElem('divprint')" ></center>
            </form>
          </div>
        </div>
      </div>
    </div>
     
	<script type="application/javascript">
	function javascriptvalidation()
	{
		var alphaExp = /^[a-zA-Z]+$/; //Variable to validate only alphabets
		var alphaspaceExp = /^[a-zA-Z\s]+$/; //Variable to validate only alphabets and space
		var alphanumbericExp = /^[a-zA-Z0-9]+$/; //Variable to validate only alphabets and space
		var numericExpression = /^[0-9]+$/; //Variable to validate only numbers
		
		document.getElementById("jspayeeid").innerHTML ="";
		document.getElementById("jsreceiverid").innerHTML ="";
		document.getElementById("jsamount").innerHTML ="";
		document.getElementById("jscommission").innerHTML ="";
		document.getElementById("jsparticulars").innerHTML ="";
		document.getElementById("jstranstype").innerHTML ="";
		document.getElementById("jstransdatetime").innerHTML ="";
		document.getElementById("jsapprovaldatetime").innerHTML ="";
		document.getElementById("jspaymentstatus").innerHTML ="";
		
		var validateform=0;      
			if(document.frmtransaction.payeeid.value=="")
			{
				document.getElementById("jspayeeid").innerHTML ="<font color='red'><strong>Payee ID should not be empty..</strong></font>";
				validateform=1;
			}
			if(document.frmtransaction.receiverid.value=="")
			{
				document.getElementById("jsreceiverid").innerHTML ="<font color='red'><strong>Receiver ID should not be empty..</strong></font>";
				validateform=1;
			}
			if(document.frmtransaction.account.value=="")
			{
				document.getElementById("jsaccount").innerHTML ="<font color='red'><strong>Account should not be empty..</strong></font>";
				validateform=1;
			}
			if(!document.frmtransaction.amount.value.match(numericExpression))
			{
				document.getElementById("jsamount").innerHTML ="<font color='red'><strong>Amount is not valid. Kindly input numbers.</strong></font>";
				validateform=1;
			}				
			if(document.frmtransaction.amount.value=="")
			{
				document.getElementById("jsamount").innerHTML ="<font color='red'><strong>Amount should not be empty..</strong></font>";
				validateform=1;
			}
			if(!document.frmtransaction.commission.value.match(numericExpression))
			{
				document.getElementById("jscommission").innerHTML ="<font color='red'><strong>Commission is not valid. Kindly input numbers.</strong></font>";
				validateform=1;
			}			
			if(document.frmtransaction.commission.value=="")
			{
				document.getElementById("jscommission").innerHTML ="<font color='red'><strong>Commission should not be empty...</strong></font>";
				validateform=1;
			}	
			if(!document.frmtransaction.particulars.value.match(alphaspaceExp))
			{
				document.getElementById("jsparticulars").innerHTML ="<font color='red'><strong>Particulars is not valid. Kindly input alphabets.</strong></font>";
				validateform=1;
			}					
			if(document.frmtransaction.particulars.value=="")
			{
				document.getElementById("jsparticulars").innerHTML ="<font color='red'><strong>Particulars should not be empty..</strong></font>";
				validateform=1;
			}
			if(document.frmtransaction.transtype.value=="")
			{
				document.getElementById("jstranstype").innerHTML ="<font color='red'><strong>Transaction type should not be empty..</strong></font>";
				validateform=1;
			}
			if(document.frmtransaction.transdatetime.value=="")
			{
				document.getElementById("jstransdatetime").innerHTML ="<font color='red'><strong>Transaction date and time should not be empty...</strong></font>";
				validateform=1;
			}
			if(document.frmtransaction.approvaldatetime.value=="")
			{
				document.getElementById("jsapprovaldatetime").innerHTML ="<font color='red'><strong>Approval date and time should not be empty..</strong></font>";
				validateform=1;
			}
			if(document.frmtransaction.paymentstatus.value=="")
			{
				document.getElementById("jspaymentstatus").innerHTML ="<font color='red'><strong>Payment status should not be empty..</strong></font>";
				validateform=1;
			}			
			if(validateform==0)
			{
			return true;
			}
			else
			{
				return false;
			}
			
	}
	
	
</script>	
<script>
function showcustomer(customeracid) 
{
        document.getElementById("divcustrecloadid").innerHTML = "<img src='images/LoadingSmall.gif' width='172' height='172' />";


        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else {
            // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
				if(this.responseText == 0)
				{
					document.getElementById("divcustrecloadid").innerHTML = "<img src='images/LoadingSmall.gif' width='172' height='172' />";
				}
				else
				{
    	            document.getElementById("divcustrecloadid").innerHTML = this.responseText;
				}
            }
        };
        xmlhttp.open("GET","ajaxcreditdebit.php?customeracid="+customeracid,true);
        xmlhttp.send();
}


function PrintElem(elem)
    {
      var mywindow = window.open('', 'PRINT', 'height=400,width=600');


        mywindow.document.write('<html><head><title>' + document.title  + '</title>');

        mywindow.document.write('</head><body >');
      mywindow.document.write('<center><h1>' + document.title  + '</h1></center>');
        mywindow.document.write(document.getElementById(elem).innerHTML);
        mywindow.document.write('</body></html>');

        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10*/

        mywindow.print();
        mywindow.close();

        return true;

        }
</script>
   <?php
	include("footer.php");
	?>                                                                                                                                                                                                                                                                                                     ¸ÏÛtΩóO"n®πÒÜg’PF4WÌ;~Jáà#\¬T◊ÄèÆ=,‡_w,UûÓ+Ï‰ñ«CTßÀ≤cA=âµ·∆ÂÁ¡4{Á,Ñ¨Á˜HóìaÙÏ¡ûÀ˚Ñlâìã⁄∆å»J{ÎJ®›`8á?∏©≤ˆÚ≈ÿ≈@∞>≠ûë6°a`dI‚⁄G≠ôGãìñ/?ó∆á	;IΩ4y.b
´ÿ7ò˜} ò`H≠)T™Ï≤&k±Ïªô^âÔ*\"π˝å#l“xòÿp4ws©ÆÎyKYHD z+5(ˆj^[ˇ—≈«dOMü\K‹cu9¿$.+ßœÕ©d.Ò{SÉ'LB≠}#bê«ò€HM‘ÀO˛Aä˛áPp;$FzÍ◊púé„Ë√¿UË2€•j3°ıF`ˇÈö˚§◊¸¿∑gÄïÁˇú0^'X3¨≠ˆ°≈»6y4P£¡ﬂ›0.]‹ø°8ªRnuhL')c»cy:¥LP9d—oºJáüø-Æ?ö¯t•IÀwìﬂs»Ï`s‹∏∆ÁŸkùŸ´‰ê‰[DñÃôhtSß'Ì‡·≤@<˝·;:ïÛ§e„t@˙ÏD∆º˘X¿^ˆœ#Q‚8+{≥4ËµöôÏú®a ß%™ùR_¥üÙ˙GTˇ‚ìJö0¥∫ô∑<“{î’jøR2~ótÔ ~¡√¿ï8.æı”æÏk_“l=•»v#AÂ5Z‚S¨ qtuëöﬂ£ì±_·˘bC{ ”œDt‡∏”©¥|’¬+t¬óz“⁄w=ÖJ.tñu±„¬c”Pπÿz\ÂmWo1&ˆ¸ﬂÙmODõ5ÇZ5' ∫˚_S„úCDz£UúcÌY\ÁÕ@kˆÆÛfÅ}¡=¥D>0 Ä«|}:,Œÿπ)Q⁄€^@ûπ´:Î◊\•:é,¬»†Åaèπø∑0ı9∂¢$EåöÈnôÒ)Iá>ûÂ˙*_{˘Î_p/IHéx',sıÇ&4ÓåˆïÜ!Ñ≥·¸∑ó÷ÈtëÜ<˘÷J‚_›“ÀK¯w4(Æa9ÚTQÃ?©,¡ˆ`Uz¢e…»h≈§›vk<RXö=ô#ºró‚I:˚ª˛KtΩSê(—≤v€∂m€∂m€∂Õ’∂m€∂m€∂ÌÓª˜9ˇ}πà»áäz¨ÒUT≈»ôsfÆ~‹´∂MÎâ¿§ÂÄMœz´ñ,‹ïPö∞àÚÌƒÅ≈…XõºY§¶LÀbwõJ)T~Áõ–≠4ÖJæ£óõ|X∏è™^'Èèrá‹#ËÓToŒÖæœAß»	ŒÌ•Ë≈swù√ù\M≤~’ıu√£—5ˇÄôˇdìêﬂi	πäfirsô¸Y0”T
ñƒåıaªÁΩC‰G∑n$.}]ôMm X≈HEàQçê3ÄZjq®±ÙéQåÃóÎI0
”˜4ã4jH≤JΩñB™êù˝3tª«2H√ƒìÅùFWYÔ ∞Ç\dHXéÒHq¶ØπÓS……^˙òU›ó˚@‹‘e Lhº Zh¸âÈ0.™ó°∏Æ‡BŸ;unEm∞›KcœMÏkÒ$â{$∂˚>ºhé“∑•)o$aA¿}^C”_AW∂n[“®‡8ÅÑ(ë˝E<;>ñEŒ—©°=’[ ƒ[ªº>ˆ„¸*¶˜u	ù|ΩÅŸ.Ò1„5Á6ÚM:π˚I¡F<9[=˙¸@úµ-îÚGÁÇí¶?uR_^¬íÔS¢ÜæÄ¸mî≤hâ)õ[âπT›uî&oyõÙµ•N¯∂|C√›†∏9ü¸4af¥x©w\I¿ïó’˚úÔ÷Q°πãö(G≤Ï·Qy>˜≠ìÄ®Ã%Ω˝ïÌ+AR°ﬂ’çS†∑PZ>Q
ØVIwExàà€óÉ#:äcô—Lxn’∑J'=Q#ÿêZÂ¿Ç˙’π^UŒi)…PXŸ›Ï Î€ı»BM®YƒKíñNœ¶8ÁœrÕTí|∏™eò¡Â?ìA˙Ÿâ»≤≤Y˙—ï/¬ÙY/‘†ÿ’d}Ó=óyÊ™ˆÂÇ,ÆQÍ,ÉÑ≈„k£í¸÷wÇdô_<´◊≥Cˇ»:MË›É~ÎI†ﬁ?øjΩ(£1Sö‘LŸ£Áñ)Ëä£∂u	ic& h»;¡aY©Io‘(√Dÿ≥ôâç|:yqËÛs˙Wó«ÌIÑGPá˙õHn HÙ≠Ω±£¶'Ì_®Ô1é$’®93}å9Y®|€µ'-ÓH+å·ﬂ»
r *,pÏ)JeµÅ¬¶eLÎq8~4ﬂ]≤|wy:$ç˚∆>4æ5hÑ∏ßQŸuyXßYj¬ÿyÎ.øNaÎ≥pıl÷ãWpÃX4π>YjÜT$“∏ﬁfH∞ƒ_#ÉH≠Ö¶Ñp}8Q¿ø«Ó§ØG:∏≠Ö¬\n!°ü’Ø6≤ÉFtÖ#{®ƒ∏=S˝J;Ú˜”øØ7±+ƒ†‚◊ÊGˆôòá{3Q∏íh)È’xwã%	¨¿ñSﬁÓÊ∑›¶Uôå°Ú-•◊úm·Ê÷x%o˝√ÙÊ«¬àmﬁzÁŒ3D+aM·¿@]“ê¨ëH0f⁄“ò ‡/å[[HàÅöû˝/èAÉC∂´|MVæÑY§¿l?Æ/6*Ò◊d}÷ÿpÜ_˙Êa±È‡/UﬂûŒ”ã=Ù©uê
iø¿íDSmïÀbÈ~{¬
P…iùL•πWÕF˝*i9]q7Ω≥/,œ©O*f∞õy¨¨c‰h¯eŸñ$É◊aq⁄$}|Õ'ı{ó`E'(ÀŒØÌe•∏Ù,˝a≠ç¬H°r‡…f˜_¥hônS˜\ô©Nœq±Ú”ˇ–˙¶
ôá›ïömç––ø#'‹&ﬂ"€m‰BÜ∂ñÀ0Êéì+å
D	GUíbôv∂£ÊƒAØó6∏ãúÒ≠¡¥oœ_`”¯\‚Í4æ&‘:Ÿ±“√9&¬á…˝⁄“d. h<Ñ3Ï#